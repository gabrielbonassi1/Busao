'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.check = undefined;

var _colors = require('./colors');

var getStyle = function getStyle(element) {
    var style = window.getComputedStyle(element);
    return function (prop) {
        return style.getPropertyValue(prop);
    };
};

var checkText = function checkText(element, _ref) {
    var text = _ref.text,
        _ref$caseSensitive = _ref.caseSensitive,
        caseSensitive = _ref$caseSensitive === undefined ? false : _ref$caseSensitive;

    var innerText = caseSensitive ? element.innerText : element.innerText.toLowerCase();
    var searchingText = caseSensitive ? text : text.toLowerCase();
    return innerText.includes(searchingText);
};

var checkColor = function checkColor(element, _ref2) {
    var color = _ref2.color;

    var style = getStyle(element);
    var colorStyle = style('color');
    return (0, _colors.isSimilar)(colorStyle, color);
};

var checkBackgroundColor = function checkBackgroundColor(element, _ref3) {
    var background = _ref3.background;

    var style = getStyle(element);
    var backgroundStyle = style('background-color');
    return (0, _colors.isSimilar)(backgroundStyle, background);
};

var check = exports.check = function check(element, conditions) {
    var text = conditions.text,
        caseSensitive = conditions.caseSensitive,
        color = conditions.color,
        background = conditions.background;


    var final = true;

    // Searching Text
    if (text) if (!checkText(element, { text: text, caseSensitive: caseSensitive })) final = false;

    // Searching Color
    if (color) if (!checkColor(element, { color: color })) final = false;

    // Searching Background
    if (background) if (!checkBackgroundColor(element, { background: background })) final = false;

    return final;
};